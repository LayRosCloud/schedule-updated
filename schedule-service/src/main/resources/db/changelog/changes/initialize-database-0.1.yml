databaseChangeLog:
  - changeSet:
      author: betrayal
      id: initialize_database
      changes:
        - createTable:
            tableName: times
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
              - column:
                  name: time_start
                  type: TIME
                  constraints:
                    nullable: false
              - column:
                  name: time_end
                  type: TIME
                  constraints:
                    nullable: false
              - column:
                  name: institution_id
                  type: BIGINT
                  constraints:
                    nullable: false
        - createTable:
            tableName: subgroups
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
              - column:
                  name: group_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(20)
                  constraints:
                    nullable: false
        - createTable:
            tableName: subjects
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(15)
                  constraints:
                    nullable: false
              - column:
                  name: long_name
                  type: VARCHAR(40)
                  constraints:
                    nullable: true
              - column:
                  name: institution_id
                  type: BIGINT
                  constraints:
                    nullable: true
        - createTable:
            tableName: teachers_subjects
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
              - column:
                  name: teacher_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: subject_id
                  type: BIGINT
                  constraints:
                    nullable: false
                    references: subjects(id)
                    foreignKeyName: fk_teachers_subjects_subjects
        - createTable:
            tableName: class_types
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
              - column:
                  name: name
                  type: VARCHAR(30)
                  constraints:
                    nullable: false
                    primaryKey: true
              - column:
                  name: institution_id
                  type: BIGINT
                  constraints:
                    nullable: false
        - createTable:
            tableName: classes
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
              - column:
                  name: teacher_subject_id
                  type: BIGINT
                  constraints:
                    nullable: false
                    references: teachers_subjects(id)
                    foreignKeyName: fk_classes_teachers_subjects
              - column:
                  name: time_id
                  type: BIGINT
                  constraints:
                    nullable: false
                    references: times(id)
                    foreignKeyName: fk_classes_times
              - column:
                  name: subgroup_id
                  type: BIGINT
                  constraints:
                    nullable: false
                    references: subgroups(id)
                    foreignKeyName: fk_classes_subgroups
              - column:
                  name: date_start
                  type: DATE
                  constraints:
                    nullable: false
              - column:
                  name: date_end
                  type: DATE
                  constraints:
                    nullable: false
              - column:
                  name: audience_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: type_id
                  type: BIGINT
                  constraints:
                    nullable: false
                    references: class_types(id)
                    foreignKeyName: fk_classes_class_types